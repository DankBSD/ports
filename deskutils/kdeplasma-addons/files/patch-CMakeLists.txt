--- CMakeLists.txt.orig	2014-10-25 07:17:51 UTC
+++ CMakeLists.txt
@@ -35,28 +35,32 @@ macro_log_feature(QJSON_FOUND "QJSon" "U
 macro_optional_find_package(QtOAuth)
 macro_log_feature(QTOAUTH_FOUND "QtOAuth" "QtOAuth Library - required to build the Plasma Microblog DataEngine" "https://github.com/ayoy/qoauth" FALSE "" "Needed for building Plasma Microblog DataEngine")
 
-macro_optional_depend_package(Marble "Marble")
-if (DEPEND_PACKAGE_Marble)
-  macro_optional_find_package(Marble)
-else (DEPEND_PACKAGE_Marble)
+macro_optional_depend_package(Marble4 "Marble4")
+if (DEPEND_PACKAGE_Marble4)
+  macro_optional_find_package(Marble4)
+else (DEPEND_PACKAGE_Marble4)
   set (MARBLE_FOUND FALSE)
-endif (DEPEND_PACKAGE_Marble)
+endif (DEPEND_PACKAGE_Marble4)
 macro_log_feature(MARBLE_FOUND "Marble" "Desktop Globe" "http://marble.kde.org" FALSE "" "RECOMMENDED: Marble is used to provide a desktop globe wallpaper for Plasma.")
 
 macro_optional_find_package(DBusMenuQt)
 macro_log_feature(DBUSMENUQT_FOUND "DBusMenuQt" "DBusMenu Qt" "https://launchpad.net/libdbusmenu-qt/" FALSE "" "Needed for Unity support in IconTasks.")
 
-if (NEPOMUK_FOUND)
-  include_directories( ${SOPRANO_INCLUDE_DIR} ${NEPOMUK_INCLUDE_DIR} )
-endif (NEPOMUK_FOUND)
-
 add_definitions (${QT_DEFINITIONS} ${KDE4_DEFINITIONS})
 add_definitions(-DQT_USE_FAST_CONCATENATION -DQT_USE_FAST_OPERATOR_PLUS)
-include_directories (${KDE4_INCLUDES}
+include_directories (${QT_QTGUI_INCLUDE_DIR}
+                     ${QT_QTCORE_INCLUDE_DIR}
+                     ${QT_QTXML_INCLUDE_DIR}
+                     ${PHONON_INCLUDE_DIR}
+                     ${KDE4_INCLUDES}
                      ${KDE4WORKSPACE_INCLUDE_DIR}
                      ${KDEPIMLIBS_INCLUDE_DIR}
                      ${CMAKE_CURRENT_SOURCE_DIR}/libs)
 
+if (NEPOMUK_FOUND)
+  include_directories( ${SOPRANO_INCLUDE_DIR} ${NEPOMUK_INCLUDE_DIR} )
+endif (NEPOMUK_FOUND)
+
 add_subdirectory(libs)
 add_subdirectory(applets)
 add_subdirectory(dataengines)
