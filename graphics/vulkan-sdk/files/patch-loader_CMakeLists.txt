--- loader/CMakeLists.txt.orig	2017-08-10 15:50:41 UTC
+++ loader/CMakeLists.txt
@@ -25,7 +25,7 @@ if(CMAKE_SYSTEM_NAME STREQUAL "Windows")
     set(DisplayServer Win32)
 elseif(CMAKE_SYSTEM_NAME STREQUAL "Android")
     add_definitions(-DVK_USE_PLATFORM_ANDROID_KHR)
-elseif(CMAKE_SYSTEM_NAME STREQUAL "Linux")
+elseif(UNIX AND NOT APPLE)
     if (BUILD_WSI_XCB_SUPPORT)
         add_definitions(-DVK_USE_PLATFORM_XCB_KHR)
     endif()
@@ -186,7 +186,7 @@ else()
     add_library(${API_LOWERCASE} SHARED ${NORMAL_LOADER_SRCS} ${OPT_LOADER_SRCS})
     add_dependencies(${API_LOWERCASE} generate_helper_files loader_gen_files loader_asm_gen_files)
     set_target_properties(${API_LOWERCASE} PROPERTIES SOVERSION "1" VERSION "1.0.${vk_header_version}")
-    target_link_libraries(${API_LOWERCASE} -ldl -lpthread -lm)
+    target_link_libraries(${API_LOWERCASE} -lpthread -lm ${CMAKE_DL_LIBS})
 
     if(INSTALL_LVL_FILES)
         install(TARGETS ${API_LOWERCASE} LIBRARY DESTINATION ${CMAKE_INSTALL_LIBDIR})
